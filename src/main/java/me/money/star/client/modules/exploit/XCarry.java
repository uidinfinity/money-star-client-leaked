package me.money.star.client.modules.exploit;

import com.google.common.eventbus.Subscribe;
import me.money.star.client.gui.modules.Module;
import me.money.star.client.settings.Setting;
import me.money.star.event.impl.PacketEvent;
import me.money.star.util.traits.Util;
import net.minecraft.network.packet.c2s.play.CloseHandledScreenC2SPacket;

public class XCarry extends Module {
    public XCarry() {
        super("XCarry", "Allow player to carry items in the crafting slots",
                Category.EXPLOIT,true,false,false);
    }
    public Setting<Boolean> forceCancel = bool("ForceCancel", false);
    @Subscribe
    public void onPacketOutbound(PacketEvent.Outbound event) {
        if (Util.mc.player == null) {
            return;
        }
        if (event.getPacket() instanceof CloseHandledScreenC2SPacket packet
                && (packet.getSyncId() == Util.mc.player.playerScreenHandler.syncId
                || forceCancel.getValue())) {
            event.cancel();
        }
    }
}
